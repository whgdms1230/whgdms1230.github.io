---
sort: 1
---

# Errors and Exceptions

* 참고문헌 : 전문가를 위한 C++(마크 그레고리 / 한빛미디어)

## 1. 익셉션

예외 상황이란 프로그램에서 발생할 가능성이 있는 잠재적인 문제들을 통틀어 이르는 말이다. 프로그램을 아무리 완벽하게 작성하려 해도 에러나 예외 상황이 발생하는 것을 피할 수는 없다. 따라서 프로그램을 작성할 때는 반드시 에러 처리 기능도 함께 제공해야 한다.

익셉션이라 코드에서 발생한 예외 상황이나 에러가 코드의 정상적인 실행 흐름에 퍼지지 않도록 알려주는 메커니즘이다.

익셉션 메커니즘을 적용하여 에러가 발생한 코드는 익셉션을 던지고, 이를 처리하는 코드는 발생한 익셉션을 받아서 처리하는 식으로 작동한다.

익셉션을 처리하는 과정은 기존 프로그램과 달리 순차적으로 실행되지 않는다. 어떤 코드가 익셉션을 던지면 프로그램의 정상 실행 흐름을 잠시 멈추고 익셉션 핸들러로 제어권을 넘긴다. 이때 핸들러의 위치는 다양하다. 함수 바로 뒤에 나올 수도 있고, 연속된 함수 호출을 거슬러 올라가야 나올 수도 있다.

예를 들어 `A()`, `B()`, `C()`의 세 함수가 연달아 호출됐을 때의 스택 상태를 살펴보자. 익셉션 핸들러가 있는 `A()`를 호출한 다음 `B()`를 호출하고, `B()`는 다시 `C()`를 호출했는데, `C()`에서 익셉션이 발생했다고 하자.

이 경우에 `C()`와 `B()`에 대한 스택 프레임은 삭제되고, `A()`에 대한 스택 프레임만 남는다. 

## 2. C++에서 익셉션이 필요한 이유

익셉션 메커니즘을 활용하면 에러를 쉽고 일관성 있고 안전하게 처리할 수 있다. 기존에 C나 C++에서 활용하던 비공식 에러 처리 기법에 비해 익셉션 메커니즘이 여러가지로 뛰어나다.

또한 최신 컴파일러는 익셉션이 발생하지 않으면 오버헤드가 거의 없고, 익셉션이 실제로 발생했을 때만 약간의 오버헤드가 발생하도록 잘 타협하고 있다. 익셉션은 말 그대로 예외이기 때문에 이렇게 상황에 따라 오버헤드를 최소화하도록 처리하는 것이 합리적이다.

자바와 달리 C++는 익셉션을 처리하지 않아도 된다. 예를 들어 자바는 메서드에 미리 지정해두지 않은 익셉션을 던질 수 없다. C++는 이와 반대로 `noexception` 키워드로 익셉션이 절대 발생하지 않는다고 명시하지 않는 한 원하는 익셉션을 마음껏 던질 수 있다.