<!DOCTYPE html> <html lang="en" dir="auto"> <head><meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=no"> <meta name="description" content="ROS-CycloneDDS Code 0. 참고 문헌 - OSRF RMF free fleet github pages - Cyclone Bridge - Cyclone Ros1 Node - Cyclone Ros Node 1. cyclone_bridge cyclone_b..."> <meta name="revised" content="cb58199ddbfcf980773419933c42d5d2d80f2415"> <meta name="author" content="PaulKim"> <meta name="generator" content="jekyll-rtd-theme v2.0.10"><meta name="theme-color" content="#2980b9"> <title>ROS-CycloneDDS Code · ROBOT NOTE</title> <meta name="twitter:title" content="ROS-CycloneDDS Code · ROBOT NOTE"> <meta name="twitter:description" content="ROS-CycloneDDS Code 0. 참고 문헌 - OSRF RMF free fleet github pages - Cyclone Bridge - Cyclone Ros1 Node - Cyclone Ros Node 1. cyclone_bridge cyclone_b..."> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@PaulKim"> <meta name="twitter:url" content="http://localhost:4000/0004Tools/0002Knowledges/0001CycloneDDS/0005ROSCycloneDDS_code.html"> <meta name="twitter:creator" content="@jekyll-rtd-theme v2.0.10"> <meta property="og:title" content="ROS-CycloneDDS Code · ROBOT NOTE"> <meta property="og:description" content="ROS-CycloneDDS Code 0. 참고 문헌 - OSRF RMF free fleet github pages - Cyclone Bridge - Cyclone Ros1 Node - Cyclone Ros Node 1. cyclone_bridge cyclone_b..."> <meta property="og:locale" content="en"> <meta property="og:url" content="http://localhost:4000/0004Tools/0002Knowledges/0001CycloneDDS/0005ROSCycloneDDS_code.html"> <meta property="og:type" content="article"> <meta property="article:author" content="PaulKim"> <meta property="article:published_time" content="2021-10-11T13:52:56+09:00"> <meta property="article:modified_time" content="2022-01-04T22:26:37+09:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "http://localhost:4000/0004Tools/0002Knowledges/0001CycloneDDS/0005ROSCycloneDDS_code.html" }, "headline": "ROS-CycloneDDS Code · ROBOT NOTE", "image": [], "author": { "@type": "Person", "name": "PaulKim" }, "datePublished": "2021-10-11T13:52:56+09:00", "dateModified": "2022-01-04T22:26:37+09:00", "publisher": { "@type": "User", "name": "PaulKim", "logo": { "@type": "ImageObject", "url": "https://avatars.githubusercontent.com/u/42468354?v=4" } }, "description": "ROS-CycloneDDS Code 0. 참고 문헌 - OSRF RMF free fleet github pages - Cyclone Bridge - Cyclone Ros1 Node - Cyclone Ros Node 1. cyclone_bridge cyclone_b..." } </script> <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="prev" href="http://localhost:4000/0004Tools/0002Knowledges/0001CycloneDDS/0004ROSCycloneDDS_intro.html"><link rel="canonical" href="http://localhost:4000/0004Tools/0002Knowledges/0001CycloneDDS/0005ROSCycloneDDS_code.html"><link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg"><link rel="icon" type="image/png" href="/assets/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/assets/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/assets/images/favicon-96x96.png" sizes="96x96"><link rel="mask-icon" href="/assets/images/favicon.svg" color="#2980b9"><link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-300x300.jpg"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/css/theme.min.css"><script> window.ui = { title: "ROBOT NOTE", baseurl: "", i18n: { search_results: "Search Results", search_results_found: "Search finished, found # page(s) matching the search query.", search_results_not_found: "Your search did not match any documents, please make sure that all characters are spelled correctly!" } }; </script> </head> <body class="container"><div class="sidebar-wrap overflow-hidden"> <div class="sidebar height-full overflow-y-scroll overflow-x-hidden"> <div class="header d-flex flex-column p-3 text-center"> <div class="title pb-1"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/" title="로봇 개발에 필요한 자료들을 모아놓은 노트"> <i class="fa fa-home"></i> ROBOT NOTE </a> </div> <span class="version"></span> <form class="search pt-2" action="/search.html" method="get" autocomplete="off"> <input class="form-control input-block input-sm" type="text" name="q" placeholder="Search docs..."> </form> </div> <div class="toctree py-2" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> </ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/0001ROS/"> ROS </a><ul> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/"> ROS 1.0 </a><ul> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0001Basic/"> BASIC </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0001Install.html">1. Install</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0002Catkin.html">2. Catkin</a> </li> <li class="toc level-3 " data-sort="3" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0003CMakeList.html">3. CMakeLists.txt</a> </li> <li class="toc level-3 " data-sort="4" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0004Package-xml.html">4. Package.xml</a> </li> <li class="toc level-3 " data-sort="5" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0005Launch-System.html">5. Launch System</a> </li> <li class="toc level-3 " data-sort="6" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0006Package.html">6. ROS 1 Package Structure</a> </li> <li class="toc level-3 " data-sort="7" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0007CLI.html">7. Command Line Interface</a> </li> <li class="toc level-3 " data-sort="8" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0008Topic.html">8. Topic</a> </li> <li class="toc level-3 " data-sort="9" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0009Service.html">9. Service</a> </li> <li class="toc level-3 " data-sort="10" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0010Action.html">10. Action</a> </li> <li class="toc level-3 " data-sort="11" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0001Basic/0011Parameter.html">11. Parameter</a> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0002Intermediate/"> INTERMEDIATE </a><ul> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0002Intermediate/0001Actionlib/"> Actionlib </a><ul> <li class="toc level-4 " data-sort="1" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0002Intermediate/0001Actionlib/0001actionlib.html">1. actionlib</a> </li> <li class="toc level-4 " data-sort="2" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0002Intermediate/0001Actionlib/0002actionlibBeginnerTutorials_cpp.html">2. actionlib beginner tutorials(c++)</a> </li> <li class="toc level-4 " data-sort="3" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0002Intermediate/0001Actionlib/0003actionlibBeginnerTutorials_python.html">3. actionlib beginner tutorials(python)</a> </li> <li class="toc level-4 " data-sort="4" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0002Intermediate/0001Actionlib/0004actionlibIntermediateTutorials.html">4. actionlib intermediate tutorials</a> </li> <li class="toc level-4 " data-sort="5" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0002Intermediate/0001Actionlib/0005actionlibAdvancedTutorials.html">5. actionlib advanced tutorials</a> </li> <li class="toc level-4 " data-sort="6" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0002Intermediate/0001Actionlib/0006DynamicReconfigure.html">6. dynamic reconfigure</a> </li></ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0002Intermediate/0002Gazebo/"> GAZEBO </a><ul> </ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0002Intermediate/0003rosdistro/"> rosdistro </a><ul> </ul> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/"> ADVANCED </a><ul> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/"> NAVIGATION </a><ul> <li class="toc level-4"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/01RobotSetup/"> RobotSetup </a><ul> <li class="toc level-5 " data-sort="1" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/01RobotSetup/0001TF.html">1. TF</a> </li> <li class="toc level-5 " data-sort="2" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/01RobotSetup/0002SensorStream.html">2. SensorStream</a> </li> <li class="toc level-5 " data-sort="3" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/01RobotSetup/0003Odometry.html">3. Odometry</a> </li> <li class="toc level-5 " data-sort="4" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/01RobotSetup/0004BaseController.html">4. BaseController</a> </li> <li class="toc level-5 " data-sort="5" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/01RobotSetup/0005Mapping.html">5. Mapping</a> </li></ul> </li> <li class="toc level-4"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/"> NavigationStackSetup </a><ul> <li class="toc level-5 " data-sort="1" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0001NavCore.html">1. nav_core</a> </li> <li class="toc level-5 " data-sort="2" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0002MoveBase.html">2. move_base</a> </li> <li class="toc level-5 " data-sort="3" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0003DWALocalPlanner.html">3. dwa_local_planner</a> </li> <li class="toc level-5 " data-sort="4" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0004GlobalPlanner.html">4. global_planner</a> </li> <li class="toc level-5 " data-sort="5" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0005DefaultRecoveryBehavior.html">5. DefaultRecoveryBehavior</a> </li> <li class="toc level-5 " data-sort="6" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0006Costmap.html">6. Costmap</a> </li> <li class="toc level-5 " data-sort="7" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0007AMCL.html">7. amcl</a> </li> <li class="toc level-5 " data-sort="8" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0008MapServer.html">8. map_server</a> </li> <li class="toc level-5 " data-sort="9" data-level="5"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/02NavigationStackSetup/0009NavigationTunning.html">9. Navigation Tunning Guide</a> </li></ul> </li> <li class="toc level-4"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/03MoveBaseFlex/"> MoveBaseFlex </a><ul> </ul> </li> <li class="toc level-4"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/0001Navigation/04CustomPlanner/"> CustomPlanner </a><ul> </ul> </li></ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/0002FlexBe/"> FlexBe </a><ul> <li class="toc level-4 " data-sort="1" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0002FlexBe/0001Installation.html">1. Installation</a> </li> <li class="toc level-4 " data-sort="2" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0002FlexBe/0002Tutorials.html">2. FlexBe Tutorials</a> </li> <li class="toc level-4 " data-sort="3" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0002FlexBe/0003DevelopingBasicStates.html">3. Developing Basic States</a> </li> <li class="toc level-4 " data-sort="4" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0002FlexBe/0004RunningBehaviors.html">4. Running Behaviors Without Operator</a> </li> <li class="toc level-4 " data-sort="5" data-level="4"> <a class="d-flex flex-items-baseline " href="/0001ROS/0001ROS1/0003Advanced/0002FlexBe/0005FlexBe_MBF_Example.html">5. FlexBe Example for MoveBaseFlex</a> </li></ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0001ROS1/0003Advanced/0003Moveit/"> Moveit </a><ul> </ul> </li></ul> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/"> ROS 2.0 </a><ul> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0001Basic/"> BASIC </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0001Install.html">1. Install</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0002Colcon.html">2. Colcon</a> </li> <li class="toc level-3 " data-sort="3" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0003CMakeList.html">3. CMakeLists.txt</a> </li> <li class="toc level-3 " data-sort="4" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0004Package-xml.html">4. Package.xml</a> </li> <li class="toc level-3 " data-sort="5" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0005Setup.html">5. setup.py</a> </li> <li class="toc level-3 " data-sort="6" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0006Launch-System.html">6. Launch System</a> </li> <li class="toc level-3 " data-sort="7" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0007Package.html">7. ROS 2 Package Structure</a> </li> <li class="toc level-3 " data-sort="8" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0008CLI.html">8. Command Line Interface</a> </li> <li class="toc level-3 " data-sort="9" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0009InterfacePackage.html">9. Interface Package</a> </li> <li class="toc level-3 " data-sort="10" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0010Topic.html">10. Topic</a> </li> <li class="toc level-3 " data-sort="11" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0011Service.html">11. Service</a> </li> <li class="toc level-3 " data-sort="12" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0012Action.html">12. Action</a> </li> <li class="toc level-3 " data-sort="13" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0013Parameter.html">13. Parameter</a> </li> <li class="toc level-3 " data-sort="14" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0014Log.html">14. Log</a> </li> <li class="toc level-3 " data-sort="15" data-level="3"> <a class="d-flex flex-items-baseline " href="/0001ROS/0002ROS2/0001Basic/0015DDS.html">15. DDS</a> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0002Intermediate/"> INTERMEDIATE </a><ul> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0002Intermediate/0001RQT/"> RQT </a><ul> </ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0002Intermediate/0002Ignition/"> IGNITION </a><ul> </ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0002Intermediate/0003rosdistro/"> rosdistro </a><ul> </ul> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0003Advanced/"> ADVANCED </a><ul> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0003Advanced/0001Navigation2/"> NAVIGATION2 </a><ul> </ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0003Advanced/0002RMF/"> RMF </a><ul> </ul> </li> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0001ROS/0002ROS2/0003Advanced/0003Moveit2/"> Moveit2 </a><ul> </ul> </li></ul> </li></ul> </li></ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/0002ROBOTICS/"> ROBOTICS </a><ul> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0002ROBOTICS/0001RobotDynamics/"> Robot Dynamics </a><ul> <li class="toc level-2 " data-sort="1" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0001HomogeneousTransformations.html">1. Homogeneous Transformations</a> </li> <li class="toc level-2 " data-sort="2" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0002ForwardKinematics.html">2. Forward Kinematics</a> </li> <li class="toc level-2 " data-sort="3" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0003InverseKinematics.html">3. Inverse Kinematics</a> </li> <li class="toc level-2 " data-sort="4" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0004VelocityKinematics.html">4. Velocity Kinematics</a> </li> <li class="toc level-2 " data-sort="5" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0005Dynamics.html">5. Dynamics</a> </li> <li class="toc level-2 " data-sort="6" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0006TrajectoryPlanning.html">6. Trajectory Planning</a> </li> <li class="toc level-2 " data-sort="7" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0007IndependentJointControl.html">7. Independent Joint Control</a> </li> <li class="toc level-2 " data-sort="8" data-level="2"> <a class="d-flex flex-items-baseline " href="/0002ROBOTICS/0001RobotDynamics/0008ForceControl.html">8. Force Control</a> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0002ROBOTICS/0002RobotDesign/"> Robot Design </a><ul> </ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0002ROBOTICS/0003ControlEngineering/"> ControlEngineering </a><ul> </ul> </li></ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/0003Software/"> Software </a><ul> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0003Software/0001Languages/"> Programming Languages </a><ul> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0003Software/0001Languages/0001C++/"> C++ </a><ul> <li class="toc level-3"> <a class="d-flex flex-items-baseline" href="/0003Software/0001Languages/0001C++/0001Professional_C++/"> Professional C++ </a><ul> <li class="toc level-4"> <a class="d-flex flex-items-baseline" href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/"> Part 1. Introduction to Professional C++ </a><ul> <li class="toc level-5"> <a class="d-flex flex-items-baseline" href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/"> Chapter 1. A Crash Course in C++ and the Standard Library </a><ul> <li class="toc level-6 " data-sort="1" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0001If-initializer.html">1. If Initializer</a> </li> <li class="toc level-6 " data-sort="2" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0002Switch-initializer.html">2. Switch Initializer</a> </li> <li class="toc level-6 " data-sort="3" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0003vector.html">3. vector 기초</a> </li> <li class="toc level-6 " data-sort="4" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0004Initializer-list.html">4. initializer_list</a> </li> <li class="toc level-6 " data-sort="5" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0005Range-based-for-statement.html">5. 범위 기반 for 문</a> </li> <li class="toc level-6 " data-sort="6" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0006Smart-pointer-basic.html">6. 스마트 포인터 기본</a> </li> <li class="toc level-6 " data-sort="7" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0007Exception.html">7. Exception</a> </li> <li class="toc level-6 " data-sort="8" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0008Type-inference.html">8. 타입 추론</a> </li> <li class="toc level-6 " data-sort="9" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0009Class_definition.html">9. Class 정의</a> </li> <li class="toc level-6 " data-sort="10" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter1/0010Uniform-initialization.html">10. 유니폼 이니셜라이저</a> </li></ul> </li> <li class="toc level-5"> <a class="d-flex flex-items-baseline" href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter2/"> Chapter 2. Working with Strings and String Views </a><ul> <li class="toc level-6 " data-sort="1" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter2/0001C_string.html">1. C style String</a> </li> <li class="toc level-6 " data-sort="2" data-level="6"> <a class="d-flex flex-items-baseline " href="/0003Software/0001Languages/0001C++/0001Professional_C++/Part1/Chapter2/0002StringLiteral.html">2. String Literal</a> </li></ul> </li></ul> </li></ul> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0003Software/0001Languages/0002Python/"> Python </a><ul> </ul> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0003Software/0002Computer/"> Computer </a><ul> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0003Software/0002Computer/0001Algorithm/"> Algorithm </a><ul> </ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0003Software/0002Computer/0002DataStructure/"> Data Structure </a><ul> </ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0003Software/0002Computer/0003AI/"> AI </a><ul> </ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0003Software/0002Computer/0004Knowledges/"> Knowledges </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0003Software/0002Computer/0004Knowledges/0001OS.html">1. OS</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0003Software/0002Computer/0004Knowledges/0002Network.html">2. Network</a> </li> <li class="toc level-3 " data-sort="3" data-level="3"> <a class="d-flex flex-items-baseline " href="/0003Software/0002Computer/0004Knowledges/0003Library.html">3. Library</a> </li></ul> </li></ul> </li></ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/0004Tools/"> Tools &amp; Knowleges </a><ul> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0004Tools/0001DevelopmentTool/"> Development Tools </a><ul> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0001DevelopmentTool/0001Git/"> GIT </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0001Command.html">1. Command</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0002Git.html">2. Git</a> </li> <li class="toc level-3 " data-sort="3" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0003Commit.html">3. Commit</a> </li> <li class="toc level-3 " data-sort="4" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0004Merge.html">4. Merge &amp; Rebase</a> </li> <li class="toc level-3 " data-sort="5" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0005Branch.html">5. Branch</a> </li> <li class="toc level-3 " data-sort="6" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0006ISSUE.html">6. PR &amp; ISSUE</a> </li> <li class="toc level-3 " data-sort="7" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0007Fork.html">7. Fork &amp; Pull Request</a> </li> <li class="toc level-3 " data-sort="8" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0008License.html">8. License</a> </li> <li class="toc level-3 " data-sort="9" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0009Linter.html">9. Linter &amp; Action</a> </li> <li class="toc level-3 " data-sort="10" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0001Git/0010Submodule.html">10. Submodule</a> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0001DevelopmentTool/0002Linux/"> Linux </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0001Command.html">1. Command</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0002ShellScript.html">2. ShellScript &amp; bashrc</a> </li> <li class="toc level-3 " data-sort="3" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0003BootingScript.html">3. BootingScript</a> </li> <li class="toc level-3 " data-sort="4" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0004vim.html">4. vi deitor</a> </li> <li class="toc level-3 " data-sort="5" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0005SymbolicLink.html">5. Symbolic Link</a> </li> <li class="toc level-3 " data-sort="6" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0006EnvironmentVariable.html">6. Environment Variable</a> </li> <li class="toc level-3 " data-sort="7" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0007SSH.html">7. SSH</a> </li> <li class="toc level-3 " data-sort="8" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0008SCP.html">8. SCP</a> </li> <li class="toc level-3 " data-sort="9" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0002Linux/0009Process.html">9. Process</a> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0001DevelopmentTool/0003VSCode/"> VSCode </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0003VSCode/0001ROSSetting.html">1. ROS Setting</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0001DevelopmentTool/0003VSCode/0002Extension.html">2. Extensions</a> </li></ul> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/"> Knowledges </a><ul> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0001CycloneDDS/"> CycloneDDS </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0001CycloneDDS/0001Install.html">1. Install</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0001CycloneDDS/0002Tutorials.html">2. Tutorials</a> </li> <li class="toc level-3 " data-sort="3" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0001CycloneDDS/0003IDLC.html">3. IDLC</a> </li> <li class="toc level-3 " data-sort="4" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0001CycloneDDS/0004ROSCycloneDDS_intro.html">4. ROS-CycloneDDS Introduce</a> </li> <li class="toc level-3 current" data-sort="5" data-level="3"> <a class="d-flex flex-items-baseline current" href="/0004Tools/0002Knowledges/0001CycloneDDS/0005ROSCycloneDDS_code.html">5. ROS-CycloneDDS Code</a> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0002Docker/"> Docker </a><ul> </ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0003TCPIP/"> TCP/IP </a><ul> </ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0004RESTAPI/"> REST API </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0004RESTAPI/0001RESTAPI.html">1. REST API</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0004RESTAPI/0002cpprestSDK.html">2. C++ REST SDK</a> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0005DB/"> DB </a><ul> <li class="toc level-3 " data-sort="1" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0005DB/0001DB.html">1. DB</a> </li> <li class="toc level-3 " data-sort="2" data-level="3"> <a class="d-flex flex-items-baseline " href="/0004Tools/0002Knowledges/0005DB/0002SQLite.html">2. SQLite</a> </li></ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0006MQ/"> MQ </a><ul> </ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0007MQTT/"> MQTT </a><ul> </ul> </li> <li class="toc level-2"> <a class="d-flex flex-items-baseline" href="/0004Tools/0002Knowledges/0008CMake/"> CMAKE </a><ul> </ul> </li></ul> </li></ul> </div> </div> </div> <div class="content-wrap"> <div class="header d-flex flex-justify-between p-2 hide-lg hide-xl" aria-label="top navigation"> <button id="toggle" aria-label="Toggle menu" class="btn-octicon p-2 m-0 text-white" type="button"> <i class="fa fa-bars"></i> </button> <div class="title flex-1 d-flex flex-justify-center"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/">ROBOT NOTE</a> </div> </div> <div class="content p-3 p-sm-5"> <div class="navigation-top d-flex flex-justify-between"> <ul class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation"> <li class="breadcrumb-item"> <a class="no-underline" href="/" title="/"> <i class="fa fa-home"></i> </a> </li><li class="breadcrumb-item" ><a href="/0004Tools/">0004Tools</a></li><li class="breadcrumb-item" ><a href="/0004Tools/0002Knowledges/">0002Knowledges</a></li><li class="breadcrumb-item" ><a href="/0004Tools/0002Knowledges/0001CycloneDDS/">0001CycloneDDS</a></li><li class="breadcrumb-item" aria-current="page">0005ROSCycloneDDS_code.md</li></ul> <a class="edit" href="https://github.com/whgdms1230/whgdms1230.github.io/edit/gh-pages/0004Tools/0002Knowledges/0001CycloneDDS/0005ROSCycloneDDS_code.md" title="Edit on GitHub" rel="noreferrer" target="_blank"> <i class="fa fa-edit"></i> </a> </div> <hr> <div role="main" itemscope="itemscope" itemtype="https://schema.org/Article"> <div class="markdown-body" itemprop="articleBody"> <h1 id="ros-cyclonedds-code">ROS-CycloneDDS Code</h1> <h2 id="0-참고-문헌">0. 참고 문헌</h2> <p><em>- <a href="https://github.com/open-rmf/free_fleet">OSRF RMF free fleet github pages</a></em></p> <p><em>- <a href="https://github.com/whgdms1230/cyclone_bridge">Cyclone Bridge</a></em></p> <p><em>- <a href="https://github.com/whgdms1230/cyclone_ros1_node">Cyclone Ros1 Node</a></em></p> <p><em>- <a href="https://github.com/whgdms1230/cyclone_ros2_node">Cyclone Ros Node</a></em></p> <h2 id="1-cyclone_bridge">1. cyclone_bridge</h2> <p>cyclone_bridge의 구조는 다음과 같다.</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>cyclone_bridge
├── cmake
│   └── cyclone_bridge-config.cmake.in
├── CMakeLists.txt
├── include
│   └── cyclone_bridge
│       ├── messages
│       │   ├── IntNumber.hpp
│       │   ├── Msg.hpp
│       │   └── StrString.hpp
│       ├── ROS1Bridge.hpp
│       ├── ROS1Config.hpp
│       ├── ROS2Bridge.hpp
│       └── ROS2Config.hpp
├── package.xml
├── README.md
└── src
    ├── dds_utils
    │   ├── common.cpp
    │   ├── common.hpp
    │   ├── DDSPublishHandler.hpp
    │   └── DDSSubscribeHandler.hpp
    ├── messages
    │   ├── Messages.c
    │   ├── Messages.h
    │   └── Messages.idl
    ├── ROS1Bridge.cpp
    ├── ROS1Impl.cpp
    ├── ROS1Impl.hpp
    ├── ROS2Bridge.cpp
    ├── ROS2Impl.cpp
    └── ROS2Impl.hpp
</code></pre>  </div></div> <ul> <li><code class="language-plaintext highlighter-rouge notranslate">cyclone_birdge-config.cmake.in</code>은 cmake 파일을 정의하기 위해 사용된 파일이다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">include/cyclone_bridge</code>에는 DDS통신으로 받아온 데이터를 ROS 패키지 안에서 저장하기 위해 <code class="language-plaintext highlighter-rouge notranslate">message</code>폴더 안에 헤더파일로 정의되어 있다. 그리고, <code class="language-plaintext highlighter-rouge notranslate">*Bridge.hpp</code> 파일은 ros 노드에서 <code class="language-plaintext highlighter-rouge notranslate">cyclone_bridge</code>의 함수를 호출하기 위해 사용되며 <code class="language-plaintext highlighter-rouge notranslate">*Config.hpp</code>파일은 dds 통신시 필요한 configuration을 정의하기 위해 사용된다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">src/dds_tuils</code>는 dds 통신에 필요한 util 파일들이며, <code class="language-plaintext highlighter-rouge notranslate">common.cpp</code>, <code class="language-plaintext highlighter-rouge notranslate">common.hpp</code>는 ros의 string 자료형 변수를 dds의 char* 자료형 변수에 할당하기 위한 <code class="language-plaintext highlighter-rouge notranslate">dds_string_alloc_and_copy()</code>함수가 정의되어 있으며, <code class="language-plaintext highlighter-rouge notranslate">DDSPublishHandler.hpp</code>와 <code class="language-plaintext highlighter-rouge notranslate">DDSSubscribeHandler.hpp</code>에는 DDS 통신에 사용되는 handler를 정의한 클래스가 구현되어 있다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">src</code> 내부의 <code class="language-plaintext highlighter-rouge notranslate">*Bridge.cpp</code>는 ros 노드에서 <code class="language-plaintext highlighter-rouge notranslate">cyclone_bridge</code> 함수를 호출하기 위한 함수를 정의하였으며, 해당 함수를 이용하여 dds 통신 구현체인 <code class="language-plaintext highlighter-rouge notranslate">impl</code>의 함수를 사용하도록 구현되어 있다. <code class="language-plaintext highlighter-rouge notranslate">*Impl.cpp</code>, <code class="language-plaintext highlighter-rouge notranslate">*Impl.hpp</code>에는 실제 dds 통신을 구현하는 구현체가 들어있으며, 해당 함수들을 이용하여 dds 메시지 통신을 하도록 구현되어있다.</li> </ul> <h3 id="11-bridge">1.1 Bridge</h3> <p>ROS1Bridge.cpp를 보면 다음과 같다.</p> <ul> <li>먼저 ROS1Bridge 객체를 만들 때, ROS1Config의 configuration을 가져온다. 다음으로 <code class="language-plaintext highlighter-rouge notranslate">participant</code>를 만들고, <code class="language-plaintext highlighter-rouge notranslate">DDSPublisherHandler</code>와 <code class="language-plaintext highlighter-rouge notranslate">DDSSubscribeHandler</code>객체를 이용하여 dds 통신할 객체를 생성한다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="n">ROS1Bridge</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">ROS1Bridge</span><span class="o">::</span><span class="n">make</span><span class="p">(</span><span class="k">const</span> <span class="n">ROS1Config</span><span class="o">&amp;</span> <span class="n">_config</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">SharedPtr</span> <span class="n">ros1_bridge</span> <span class="o">=</span> <span class="n">SharedPtr</span><span class="p">(</span><span class="k">new</span> <span class="n">ROS1Bridge</span><span class="p">(</span><span class="n">_config</span><span class="p">));</span>

<span class="n">dds_entity_t</span> <span class="n">participant</span> <span class="o">=</span> <span class="n">dds_create_participant</span><span class="p">(</span>
    <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">dds_domainid_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_config</span><span class="p">.</span><span class="n">dds_domain</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">participant</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">DDS_FATAL</span><span class="p">(</span><span class="s">"dds_create_participant: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">dds_strretcode</span><span class="p">(</span><span class="o">-</span><span class="n">participant</span><span class="p">));</span>
  <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">dds</span><span class="o">::</span><span class="n">DDSPublishHandler</span><span class="o">&lt;</span><span class="n">CycloneBridgeData_Msg</span><span class="o">&gt;::</span><span class="n">SharedPtr</span> <span class="n">send_pub</span><span class="p">(</span>
    <span class="k">new</span> <span class="n">dds</span><span class="o">::</span><span class="n">DDSPublishHandler</span><span class="o">&lt;</span><span class="n">CycloneBridgeData_Msg</span><span class="o">&gt;</span><span class="p">(</span>
        <span class="n">participant</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CycloneBridgeData_Msg_desc</span><span class="p">,</span>
        <span class="n">_config</span><span class="p">.</span><span class="n">dds_ros1_to_ros2_topic</span><span class="p">));</span>

<span class="n">dds</span><span class="o">::</span><span class="n">DDSSubscribeHandler</span><span class="o">&lt;</span><span class="n">CycloneBridgeData_Msg</span><span class="o">&gt;::</span><span class="n">SharedPtr</span> 
    <span class="n">read_sub</span><span class="p">(</span>
        <span class="k">new</span> <span class="n">dds</span><span class="o">::</span><span class="n">DDSSubscribeHandler</span><span class="o">&lt;</span><span class="n">CycloneBridgeData_Msg</span><span class="o">&gt;</span><span class="p">(</span>
            <span class="n">participant</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CycloneBridgeData_Msg_desc</span><span class="p">,</span>
            <span class="n">_config</span><span class="p">.</span><span class="n">dds_ros2_to_ros1_topic</span><span class="p">));</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">send_pub</span><span class="o">-&gt;</span><span class="n">is_ready</span><span class="p">()</span> <span class="o">||</span> <span class="o">!</span><span class="n">read_sub</span><span class="o">-&gt;</span><span class="n">is_ready</span><span class="p">())</span>
  <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>

<span class="n">ros1_bridge</span><span class="o">-&gt;</span><span class="n">impl</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">(</span><span class="n">ROS1Impl</span><span class="o">::</span><span class="n">Fields</span><span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">participant</span><span class="p">),</span>
    <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">send_pub</span><span class="p">),</span>
    <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">read_sub</span><span class="p">)});</span>
<span class="k">return</span> <span class="n">ros1_bridge</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> <li>ros1 노드에서 호출할 <code class="language-plaintext highlighter-rouge notranslate">send()</code>함수와 <code class="language-plaintext highlighter-rouge notranslate">read()</code>함수로, 해당 함수들이 호출되면 실제 dds 통신을 구현하는 impl의 <code class="language-plaintext highlighter-rouge notranslate">send()</code>함수와 <code class="language-plaintext highlighter-rouge notranslate">read()</code>함수를 호출한다. ```cpp bool ROS1Bridge::send(const messages::Msg&amp; ros1_to_ros2_msg) { return impl-&gt;send(ros1_to_ros2_msg); }</li> </ul> <p>bool ROS1Bridge::read(messages::Msg&amp; ros2_to_ros1_msg) { return impl-&gt;read(ros2_to_ros1_msg); }</p> <div class="language-plaintext highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>
### 1.2 Impl
dds 통신을 구현하는 ROS1Impl.cpp를 보면 다음과 같다.

* 먼저 `send()`함수로, cyclone_bridge의 messages 폴더 내에 선언된 메시지 형태의 자료구조(여기서는 `Msg`)를 받아 Messages.h에 정의된 메시지 형태로 변환하여 dds 함수를 이용하여 전송하는 함수이다. 
* 먼저 `CycloneBridgeData_Msg__alloc()`을 이용하여 msg를 동적 할당 하고, msg에 데이터를 저장한다. 이 때, string의 경우 `common`에 정의되어 있는  `dds_string_alloc_and_copy()`함수를 이용하여 char* 자료형으로 변환하여 대입한다.
* 다음으로 `DDSPublishHandler`에 정의되어 있는 `write()`함수를 이용하여 msg를 전송하고, `CycloneBridgeData_Msg_free()`함수로 동적 할당을 해제한다.
```cpp
bool ROS1Bridge::ROS1Impl::send(const messages::Msg&amp; ros1_to_ros2_msg)
{
  CycloneBridgeData_Msg* msg = CycloneBridgeData_Msg__alloc();
  msg-&gt;cnt.int_num = ros1_to_ros2_msg.cnt.int_num;
  msg-&gt;messages.messages = common::dds_string_alloc_and_copy(ros1_to_ros2_msg.messages.messages);

  bool sent = fields.send_pub-&gt;write(msg);
  CycloneBridgeData_Msg_free(msg, DDS_FREE_ALL);
  return sent;
}
</code></pre>  </div></div> <ul> <li>다음으로 <code class="language-plaintext highlighter-rouge notranslate">read()</code>함수로, Messages.h에 정의된 메시지 형태의 데이터를 <code class="language-plaintext highlighter-rouge notranslate">DDSSubscribeHandler</code>에 정의된 <code class="language-plaintext highlighter-rouge notranslate">read()</code>를 이용하여 msg를 읽고, 읽어온 msg 데이터를 변환하여 cyclone_bridge의 messages 폴더 내에 선언된 메시지 형태의 자료구조(여기서는 <code class="language-plaintext highlighter-rouge notranslate">Msg</code>)에 저장하는 함수이다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="n">ROS1Bridge</span><span class="o">::</span><span class="n">ROS1Impl</span><span class="o">::</span><span class="n">read</span><span class="p">(</span><span class="n">messages</span><span class="o">::</span><span class="n">Msg</span><span class="o">&amp;</span> <span class="n">ros2_to_ros1_msg</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">auto</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">fields</span><span class="p">.</span><span class="n">read_sub</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">msg</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
<span class="p">{</span>
  <span class="n">ros2_to_ros1_msg</span><span class="p">.</span><span class="n">cnt</span><span class="p">.</span><span class="n">int_num</span> <span class="o">=</span> <span class="n">msg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">cnt</span><span class="p">.</span><span class="n">int_num</span><span class="p">;</span>
  <span class="n">ros2_to_ros1_msg</span><span class="p">.</span><span class="n">messages</span><span class="p">.</span><span class="n">messages</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">messages</span><span class="p">.</span><span class="n">messages</span><span class="p">);</span>

  <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> </ul> <h2 id="2-cyclone_ros1_node">2. cyclone_ros1_node</h2> <p>cyclone_ros1_node의 구조는 다음과 같다.</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>cyclone_ros1_node
├── CMakeLists.txt
├── launch
│   └── cyclone_ros1_node.launch
├── msg
│   ├── IntNumber.msg
│   ├── Msg.msg
│   └── StrString.msg
├── package.xml
├── README.md
└── src
    ├── main.cpp
    ├── ROS1NodeConfig.cpp
    ├── ROS1NodeConfig.hpp
    ├── ROS1Node.cpp
    └── ROS1Node.hpp
</code></pre>  </div></div> <ul> <li><code class="language-plaintext highlighter-rouge notranslate">msg</code>는 토픽의 pub 또는 sub을 하기 위해 message generation한 폴더이다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">main.cpp</code>는 메인 함수가 구현되어 있는 파일이다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">ROS1NodeConfig</code>는 노드에 필요한 configuration을 정의한 파일이다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">ROS1Node</code>는 ros1 노드로써, 토픽을 pub/sub 하고, dds 통신을 위한 handler가 선언되어 있는 파일이다.</li> </ul> <p><code class="language-plaintext highlighter-rouge notranslate">ROS1Node.cpp</code>의 일부를 설명하면 다음과 같다.</p> <ul> <li>먼저 ROS1Node를 생성하는 부분이다. cyclone_bridge에서 config를 가져오고, 해당 config를 이용하여 cyclone_bridge의 ROS1Bridge 객체를 생성한다. 이렇게 생성된 ros1_node는 ros1_bridge 객체를 이용하여 dds 통신을 할 것이다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="n">ROS1Node</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">ROS1Node</span><span class="o">::</span><span class="n">make</span><span class="p">(</span><span class="k">const</span> <span class="n">ROS1NodeConfig</span><span class="o">&amp;</span> <span class="n">_config</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">SharedPtr</span> <span class="n">ros1_node</span> <span class="o">=</span> <span class="n">SharedPtr</span><span class="p">(</span><span class="k">new</span> <span class="n">ROS1Node</span><span class="p">(</span><span class="n">_config</span><span class="p">));</span>
<span class="n">ros1_node</span><span class="o">-&gt;</span><span class="n">node</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">new</span> <span class="n">ros</span><span class="o">::</span><span class="n">NodeHandle</span><span class="p">(</span><span class="s">"ros1_node"</span><span class="p">));</span>

<span class="c1">/// Starting the ros1 node</span>
<span class="n">ROS1Config</span> <span class="n">ros1_config</span> <span class="o">=</span> <span class="n">_config</span><span class="p">.</span><span class="n">get_ros1_config</span><span class="p">();</span>
<span class="n">ROS1Bridge</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">ros1_bridge</span> <span class="o">=</span> <span class="n">ROS1Bridge</span><span class="o">::</span><span class="n">make</span><span class="p">(</span><span class="n">ros1_config</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ros1_bridge</span><span class="p">)</span>
  <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>

<span class="n">ros1_node</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">(</span><span class="n">Fields</span><span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">ros1_bridge</span><span class="p">)</span>
<span class="p">});</span>

<span class="k">return</span> <span class="n">ros1_node</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> <li>start 함수는 메시지를 입력받을 <code class="language-plaintext highlighter-rouge notranslate">send_topic_sub</code>과 리턴받은 값을 출력할 <code class="language-plaintext highlighter-rouge notranslate">read_topic_pub</code> 토픽을 생성한다. 그리고, ros2 노드로부터 리턴값을 받기 위해 <code class="language-plaintext highlighter-rouge notranslate">read_thread</code>라는 쓰레드를 생성한다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">ROS1Node</span><span class="o">::</span><span class="n">start</span><span class="p">(</span><span class="n">Fields</span> <span class="n">_fields</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">fields</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">_fields</span><span class="p">);</span>

<span class="n">read_rate</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">new</span> <span class="n">ros</span><span class="o">::</span><span class="n">Rate</span><span class="p">(</span><span class="n">ros1_node_config</span><span class="p">.</span><span class="n">read_frequency</span><span class="p">));</span>

<span class="n">send_topic_sub</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">subscribe</span><span class="p">(</span>
    <span class="n">ros1_node_config</span><span class="p">.</span><span class="n">ros1_to_ros2_topic</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ROS1Node</span><span class="o">::</span><span class="n">send_topic_cb</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

<span class="n">read_topic_pub</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">advertise</span><span class="o">&lt;</span><span class="n">cyclone_ros1_node</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="p">(</span><span class="n">ros1_node_config</span><span class="p">.</span><span class="n">ros2_to_ros1_topic</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

<span class="n">read_thread</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ROS1Node</span><span class="o">::</span><span class="n">read_thread_fn</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> <li>dds 토픽을 send하는 부분이다. <code class="language-plaintext highlighter-rouge notranslate">/ros1_to_ros2_topic</code> 메세지를 subscribe하면 <code class="language-plaintext highlighter-rouge notranslate">send_topic_cb()</code>함수가 callback되는데, 해당 메시지에서 넘어온 int_num과, message 정보를 이용하여 업데이트 한다.</li> <li>업데이트 이후 <code class="language-plaintext highlighter-rouge notranslate">send()</code>함수를 호출하는데, 여기서 cyclone_birdge에 정의된 messages::Msg형 변수에 데이터를 저장하고, bridge의 send함수로 전송한다. ```cpp void ROS1Node::send_topic_cb( const cyclone_ros1_node::Msg&amp; _msg) { new_number = _msg.cnt.int_num; new_string = _msg.messages.messages; send(); }</li> </ul> <p>void ROS1Node::send() { messages::Msg ros1_to_ros2_msg; ros1_to_ros2_msg.cnt.int_num = new_number; ros1_to_ros2_msg.messages.messages = new_string;</p> <p>fields.ros1_bridge-&gt;send(ros1_to_ros2_msg); }</p> <div class="language-plaintext highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>
* 다음은 ros2 노드로부터 메시지를 read하기 위한 부분으로, `read_thread_fn()` 쓰레드에서 `read()`함수를 주기적으로 호출하고, bridge의 read함수로 해당 토픽을 읽어오게 되면 `ros2_to_ros1_msg`에 담겨져 리턴된 값을 `read_topic_pub`의 메시지 구조에 담아 publish하게 된다.
```cpp
void ROS1Node::read()
{
  messages::Msg ros2_to_ros1_msg;
  if (fields.ros1_bridge-&gt;read(ros2_to_ros1_msg))
  {
    cyclone_ros1_node::Msg new_msg;

    new_msg.cnt.int_num = ros2_to_ros1_msg.cnt.int_num;
    new_msg.messages.messages = ros2_to_ros1_msg.messages.messages;

    read_topic_pub.publish(new_msg);
  }
}

void ROS1Node::read_thread_fn()
{
  while (node-&gt;ok())
  {
    read_rate-&gt;sleep();
    
    // read message from DDS
    read();
  }
}
</code></pre>  </div></div> <h2 id="5-cyclone_ros2_node">5. cyclone_ros2_node</h2> <p>cyclone_ros1_node의 구조는 다음과 같다.</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>cyclone_ros2_node
├── cyclone_ros2_msgs
│   ├── CMakeLists.txt
│   ├── msg
│   │   ├── IntNumber.msg
│   │   ├── Msg.msg
│   │   └── StrString.msg
│   ├── package.xml
│   └── README.md
└── cyclone_ros2_node
    ├── CMakeLists.txt
    ├── launch
    │   └── cyclone_ros2_node.xml
    ├── package.xml
    ├── README.md
    └── src
        ├── main.cpp
        ├── ROS2NodeConfig.cpp
        ├── ROS2NodeConfig.hpp
        ├── ROS2Node.cpp
        └── ROS2Node.hpp

</code></pre>  </div></div> <ul> <li><code class="language-plaintext highlighter-rouge notranslate">cyclone_ros2_msgs</code> 패키지는 토픽의 pub 또는 sub을 하기 위해 message generation하기 위한 패키지이다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">main.cpp</code>는 메인 함수가 구현되어 있는 파일이다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">ROS2NodeConfig</code>는 노드에 필요한 configuration을 정의한 파일이다.</li> <li><code class="language-plaintext highlighter-rouge notranslate">ROS2Node</code>는 ros2 노드로써, 토픽을 pub/sub 하고, dds 통신을 위한 handler가 선언되어 있는 파일이다.</li> </ul> <p><code class="language-plaintext highlighter-rouge notranslate">ROS2Node.cpp</code>의 일부를 설명하면 다음과 같다.</p> <ul> <li>먼저 ROS2Node를 생성하는 부분이다. cyclone_bridge에서 config를 가져오고, 해당 config를 이용하여 cyclone_bridge의 ROS2Bridge 객체를 생성한다. 이렇게 생성된 ros2_node는 ros2_bridge 객체를 이용하여 dds 통신을 할 것이다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="n">ROS2Node</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">ROS2Node</span><span class="o">::</span><span class="n">make</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">ROS2NodeConfig</span><span class="o">&amp;</span> <span class="n">_config</span><span class="p">,</span> <span class="k">const</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">NodeOptions</span><span class="o">&amp;</span> <span class="n">_node_options</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">// Starting the free fleet server node</span>
<span class="n">SharedPtr</span> <span class="n">ros2_node</span><span class="p">(</span><span class="k">new</span> <span class="n">ROS2Node</span><span class="p">(</span><span class="n">_config</span><span class="p">,</span> <span class="n">_node_options</span><span class="p">));</span>

<span class="n">ROS2Config</span> <span class="n">ros2_config</span> <span class="o">=</span>
    <span class="n">ros2_node</span><span class="o">-&gt;</span><span class="n">ros2_node_config</span><span class="p">.</span><span class="n">get_ros2_config</span><span class="p">();</span>
<span class="n">ROS2Bridge</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">ros2_bridge</span> <span class="o">=</span> <span class="n">ROS2Bridge</span><span class="o">::</span><span class="n">make</span><span class="p">(</span><span class="n">ros2_config</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ros2_bridge</span><span class="p">)</span>
  <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>

<span class="n">ros2_node</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">(</span><span class="n">Fields</span><span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">ros2_bridge</span><span class="p">)</span>
<span class="p">});</span>

<span class="k">return</span> <span class="n">ros2_node</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> <li>start 함수는 dds로 읽어온 함수를 주기적으로 콜백할 객체를 만들고, read한 메시지를 publish하기 위한 토픽을 생성한다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">ROS2Node</span><span class="o">::</span><span class="n">start</span><span class="p">(</span><span class="n">Fields</span> <span class="n">_fields</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">fields</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">_fields</span><span class="p">);</span>

<span class="n">read_callback_group</span> <span class="o">=</span> <span class="n">create_callback_group</span><span class="p">(</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">CallbackGroupType</span><span class="o">::</span><span class="n">MutuallyExclusive</span><span class="p">);</span>

<span class="n">read_timer</span> <span class="o">=</span> <span class="n">create_wall_timer</span><span class="p">(</span>
    <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ROS2Node</span><span class="o">::</span><span class="n">read</span><span class="p">,</span> <span class="k">this</span><span class="p">),</span>
    <span class="n">read_callback_group</span><span class="p">);</span>

<span class="n">ros1_to_ros2_msg_pub</span> <span class="o">=</span>
    <span class="n">create_publisher</span><span class="o">&lt;</span><span class="n">cyclone_ros2_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="p">(</span>
        <span class="n">ros2_node_config</span><span class="p">.</span><span class="n">ros1_to_ros2_topic</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> <li>다음은 주기적으로 호출되는 <code class="language-plaintext highlighter-rouge notranslate">read()</code> 함수로, ros2_bridge의 read 함수를 이용하여 메시지가 들어오면 <code class="language-plaintext highlighter-rouge notranslate">ros1_to_ros2_msg</code>에 저장되어 있는 메시지를 publish할 메시지에 저장하여 publish 한다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">ROS2Node</span><span class="o">::</span><span class="n">read</span><span class="p">()</span>
<span class="p">{</span>
<span class="n">messages</span><span class="o">::</span><span class="n">Msg</span> <span class="n">ros1_to_ros2_msg</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">fields</span><span class="p">.</span><span class="n">ros2_bridge</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">(</span><span class="n">ros1_to_ros2_msg</span><span class="p">))</span>
<span class="p">{</span>
  <span class="n">cyclone_ros2_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Msg</span> <span class="n">new_msg</span><span class="p">;</span>
  <span class="n">new_msg</span><span class="p">.</span><span class="n">cnt</span><span class="p">.</span><span class="n">int_num</span> <span class="o">=</span> <span class="n">ros1_to_ros2_msg</span><span class="p">.</span><span class="n">cnt</span><span class="p">.</span><span class="n">int_num</span><span class="p">;</span>
  <span class="n">new_msg</span><span class="p">.</span><span class="n">messages</span><span class="p">.</span><span class="n">messages</span> <span class="o">=</span> <span class="n">ros1_to_ros2_msg</span><span class="p">.</span><span class="n">messages</span><span class="p">.</span><span class="n">messages</span><span class="p">;</span>

  <span class="n">return_number</span> <span class="o">=</span> <span class="n">new_msg</span><span class="p">.</span><span class="n">cnt</span><span class="p">.</span><span class="n">int_num</span><span class="p">;</span>
  <span class="n">return_string</span> <span class="o">=</span> <span class="n">new_msg</span><span class="p">.</span><span class="n">messages</span><span class="p">.</span><span class="n">messages</span><span class="p">;</span>

  <span class="n">ros1_to_ros2_msg_pub</span><span class="o">-&gt;</span><span class="n">publish</span><span class="p">(</span><span class="n">new_msg</span><span class="p">);</span>

  <span class="n">send</span><span class="p">();</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> <li>다음은 <code class="language-plaintext highlighter-rouge notranslate">send()</code>함수로 <code class="language-plaintext highlighter-rouge notranslate">read()</code>함수에서 읽어온 메시지를 저장한 변수를 다시 담아서 리턴하는 함수이다. 이 때도 ros2_bridge의 send 함수를 이용하여 메시지를 전송한다. <div class="language-cpp highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">ROS2Node</span><span class="o">::</span><span class="n">send</span><span class="p">()</span>
<span class="p">{</span>
<span class="n">messages</span><span class="o">::</span><span class="n">Msg</span> <span class="n">ros2_to_ros1_msg</span><span class="p">;</span>
<span class="n">ros2_to_ros1_msg</span><span class="p">.</span><span class="n">cnt</span><span class="p">.</span><span class="n">int_num</span> <span class="o">=</span> <span class="n">return_number</span><span class="p">;</span>
<span class="n">ros2_to_ros1_msg</span><span class="p">.</span><span class="n">messages</span><span class="p">.</span><span class="n">messages</span> <span class="o">=</span> <span class="n">return_string</span><span class="p">;</span>

<span class="n">fields</span><span class="p">.</span><span class="n">ros2_bridge</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">ros2_to_ros1_msg</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>  </div> </div> </li> </ul> <h2 id="6-customizing-방법">6. Customizing 방법</h2> <p>여기서는 DDS 통신을 이용하여 메시지를 추가하거나 메시지 구조를 변경하는 방법 등에 대해 설명한다. 그 이외의 dds 통신을 기반으로 node의 응용은 사용자의 능력에 따라 달라질 것 같다.</p> <h3 id="61-cyclone_bridge">6.1 cyclone_bridge</h3> <ol> <li>새로운 메시지 구조를 만들기 위해 Messages.idl에 원하는 메시지 구조를 입력한다.</li> <li>idlc를 이용하여 Messages.c와 Message.h를 생성한다.</li> <li>Messages.idl에 선언한 메시지를 담을 수 있는 메시지를 <code class="language-plaintext highlighter-rouge notranslate">cyclone_bridge/include/cyclone_bridge/messages</code>에 정의한다.</li> <li>DDS로 통신하고자 하는 메시지 형태를 정한다.</li> <li>통신하고자 하는 메시지들의 토픽명을 config에 저장한다.</li> <li>통신하고자 하는 메시지 형태마다 Handler를 이용하여 send용 구현체와 read용 구현체를 만든다.</li> <li>bridge에 해당하는 자료구조를 인자로 받은 send용 함수와 read용 함수를 만든다.</li> </ol> <h3 id="62-ros-node">6.2 ros node</h3> <ol> <li>새로운 메시지 형태를 ros 메시지로 사용하고자 한다면 동일한 메시지 구조로 message generation을 한다.(선택 사항)</li> <li>ros node에서는 cyclone_bridge의 config와 bridge 객체를 가져오므로, cyclone_bridge에서 message 형태를 가져와 해당하는 메시지 구조에 담아서 read 또는 send하면 dds 통신을 활용할 수 있다.</li> </ol> </div> </div> <div class="navigation-bottom d-flex flex-justify-between py-3" role="navigation" aria-label="footer navigation"> <div class="prev"><a href="/0004Tools/0002Knowledges/0001CycloneDDS/0004ROSCycloneDDS_intro.html" class="btn" title="ROS-CycloneDDS Introduce" accesskey="p" rel="prev"> <i class="fa fa-arrow-circle-left"></i> Previous </a></div> <div class="next"></div> </div><hr> <div class="copyright text-center text-gray" role="contentinfo"> <i class="fa fa-copyright"></i> <span class="time">2021,</span> <a class="text-gray" href="https://github.com/whgdms1230" rel="noreferrer" target="_blank">PaulKim</a> Revision <a class="text-gray" href="https://github.com/whgdms1230/whgdms1230.github.io/commit/cb58199ddbfcf980773419933c42d5d2d80f2415" title="cb58199ddbfcf980773419933c42d5d2d80f2415" rel="noreferrer" target="_blank">cb58199</a> <br> <div class="generator"> Built with <a href="https://pages.github.com" rel="noreferrer" target="_blank" title="github-pages v209">GitHub Pages</a> using a <a href="https://github.com/rundocs/jekyll-rtd-theme" rel="noreferrer" target="_blank" title="jekyll-rtd-theme v2.0.10">theme</a> provided by <a href="https://rundocs.io" rel="noreferrer" target="_blank">RunDocs</a>. </div> </div> </div> </div> <div class="addons-wrap d-flex flex-column overflow-y-auto"> <div class="status d-flex flex-justify-between p-2"> <div class="title p-1"> <i class="fa fa-book"></i> ROBOT NOTE </div> <div class="branch p-1"> <span class="name"> gh-pages </span> <i class="fa fa-caret-down"></i> </div> </div> <div class="addons d-flex flex-column height-full p-2 d-none"> <dl> <dt>GitHub</dt> <dd> <a href="https://github.com/whgdms1230/whgdms1230.github.io" title="Stars: 0"> <i class="fa fa-github"></i> Homepage </a> </dd> <dd> <a href="https://github.com/whgdms1230/whgdms1230.github.io/issues" title="Open issues: 0"> <i class="fa fa-question-circle-o"></i> Issues </a> </dd> <dd> <a href="https://github.com/whgdms1230/whgdms1230.github.io/zipball/gh-pages" title="Size: 6488 Kb"> <i class="fa fa-download"></i> Download </a> </dd> </dl> <hr> <div class="license f6 pb-2"> This <a href="/" title="ROBOT NOTE">Software</a> is under the terms of <a href="https://github.com/whgdms1230/whgdms1230.github.io">MIT License</a>. </div> </div> </div> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/theme.min.js"></script> </body> </html>